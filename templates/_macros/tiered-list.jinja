# Params
# variant: integer representing layout variant; see docs for options:
# https://vanillaframework.io/docs/patterns/tiered-list
# Slots
# title: top-level title element
# description: top-level description element
# list_item_title_[1-25]: title element of each child list item
# list_item_description_[1-25]: description element of each child list item
# cta: CTA block element
{% macro tiered_list(variant=1) -%}
  {%- set title_content = caller('title') -%}
  {%- set description_content = caller('description') -%}
  {%- set has_description = description_content|trim|length > 0 -%}
  {%- set cta_content = caller('cta') -%}
  {%- set has_cta = cta_content|trim|length > 0 -%}

  <div class="u-fixed-width">
    <hr class="u-hide--small">

    {% if has_description == true -%}
      {%- if variant in [2, 4] -%}
        <div class="u-fixed-width">
          <div class="p-section--shallow">
            {{ title_content }}
          </div>
        </div>

        <div class="row">
          <div class="col-6 col-start-large-7">
            {{ description_content }}
          </div>
        </div>
      {%- else -%}
        <div class="row">
          <div class="col-6">
            <div class="p-section--shallow">
              {{ title_content }}
            </div>
          </div>

          <div class="col-6">
            {{ description_content }}
          </div>
        </div>
      {%- endif -%}
    {%- else -%}
      <div class="u-fixed-width">
        <div class="p-section--shallow">
          {{ title_content }}
        </div>
      </div>
    {%- endif %}

    <div class="p-section--shallow">
      {%- for number in range(1, 25) -%}
        {%- set list_item_title_content = caller('list_item_title_' + number|string) -%}
        {%- set has_title_content = list_item_title_content|trim|length > 0 -%}
        {%- set list_item_description_content = caller('list_item_description_' + number|string) -%}
        {%- set has_description_content = list_item_description_content|trim|length > 0 -%}

        {%- if has_title_content and has_description_content -%}
          {%- if variant in [1, 4] %}
            <div class="row">
              <div class="col-9 col-start-large-4">
                <hr class="is-muted">
              </div>
            </div>

            <div class="row">
              <div class="col-3 col-start-large-4">
                {{ list_item_title_content }}
              </div>

              <div class="col-6">
                {{ list_item_description_content }}
              </div>
            </div>
          {%- else %}
            <div class="row">
              <div class="col-9 col-start-large-4">
                <hr class="is-muted">
              </div>
            </div>

            <div class="row">
              <div class="col-medium-3 col-3 col-start-large-4">
                {{ list_item_title_content }}
              </div>

              <div class="col-medium-3 col-6">
                {{ list_item_description_content }}
              </div>
            </div>
          {%- endif -%}
        {%- endif -%}
      {% endfor %}
    </div>

    {% if has_cta == true -%}
      <div class="p-cta-block">
        <div class="row">
          <div class="col-6 col-start-large-7">
            {{ cta_content }}
          </div>
        </div>
      </div>
    {%- endif %}
  </div>
{%- endmacro %}
