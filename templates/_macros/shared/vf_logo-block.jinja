{% from "_macros/shared/vf_dedent.jinja" import vf_dedent %}

{#
  Shared logo block renderer. Exports `vf_logo_block` for import by other macros.
  Expects a config dict with:
    - logos: array of logo objects (each may include `attrs` map and `has_line_break_after`)
    - is_fixed_width: boolean (defaults to true)
#}
{% macro vf_logo_block(logo_block_config={}) -%}
  {%- set is_fixed_width = logo_block_config.get("is_fixed_width", true) != false -%}
  {%- if is_fixed_width -%}<div class="u-fixed-width">{%- endif -%}
    <div class="p-logo-section">
      {%- for logo in logo_block_config.get("logos", []) -%}
        <div class="p-logo-section__item">
          <img class="p-logo-section__logo {{ logo.get("attrs", {}).get("class", "") -}}"
            {%- for attr, value in logo.get("attrs", {}).items() -%}
              {% if attr != "class" %}
                {{ attr }}="{{ value }}"
              {%- endif -%}
            {%- endfor -%}
          />
          {%- if logo.get("has_line_break_after", false) -%}
            <br class="u-hide--small">
          {%- endif -%}
        </div>
      {%- endfor -%}
    </div>
  {%- if is_fixed_width -%}</div>{%- endif -%}
{%- endmacro %}
