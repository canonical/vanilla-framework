@import 'settings';

@mixin horizontal-dividers() {
  padding-bottom: $spv--large;
  padding-top: $spv--large;

  &:not(:first-child)::before {
    content: '';
    height: 1px;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
  }
}

@mixin vertical-dividers() {
  &:not(:first-child)::before {
    bottom: 0;
    content: '';
    left: map-get($grid-gutter-widths, default) * -0.5; // "large" here is not a typo. The grid switches to 12 columns at breakpoint medium. Hence the use of large-screen gutter
    position: absolute;
    top: 0;
    width: 1px;
  }
}

@mixin vf-p-divider {
  .p-divider {
    @extend %vf-row;

    margin-bottom: $spv--x-large;
  }

  .p-divider__block {
    position: relative;

    @media (max-width: $breakpoint-small) {
      @include horizontal-dividers();
    }

    // Medium screens will have horizontal dividers unless col-medium-...
    // classes have been applied.
    @media (min-width: $breakpoint-small) and (max-width: $breakpoint-large - 1) {
      // When there are no medium col overrides then set the dividers to horizontal
      &:not([class*='#{$grid-medium-col-prefix}']) {
        @include horizontal-dividers();
      }

      // If a col-medium- class has been applied then use vertical dividers.
      &[class*='#{$grid-medium-col-prefix}'] {
        @include vertical-dividers();
      }
    }

    @media (min-width: $threshold-6-12-col) {
      @include vertical-dividers();
    }
  }

  // Theming
  @if ($theme-default-p-divider == 'dark') {
    .p-divider__block {
      @include vf-divider-dark-theme;
    }

    .p-divider.is-light .p-divider__block {
      @include vf-divider-light-theme;
    }
  } @else {
    .p-divider__block {
      @include vf-divider-light-theme;
    }

    .p-divider.is-dark .p-divider__block {
      @include vf-divider-dark-theme;
    }
  }
}

@mixin vf-divider-theme($color-divider-text, $color-divider-line) {
  color: $color-divider-text;

  &:not(:first-child)::before {
    background-color: $color-divider-line;
  }
}

@mixin vf-divider-light-theme {
  @include vf-divider-theme($colors--light-theme--text-default, $colors--light-theme--border-default);
}

@mixin vf-divider-dark-theme {
  @include vf-divider-theme($colors--dark-theme--text-default, $colors--dark-theme--border-default);
}
