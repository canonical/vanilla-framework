<!doctype html>
<html lang="en">

  <head>
    {% if tag_manager_code %}
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','{{ tag_manager_code }}');</script>
    <!-- End Google Tag Manager -->
    {% endif %}

    <meta charset="UTF-8" />
    <title>{{ title }} | {{ site_title if site_title else 'Documentation' }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{{ site_favicon }}" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>

  <body>
    {% if tag_manager_code %}
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ tag_manager_code }}"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    {% endif %}

    <header id="navigation" class="p-navigation">
      <div class="p-navigation__banner">
        <div class="p-navigation__logo" style="margin-bottom: 0">
          <a href="https://vanillaframework.io/">
            <img src="https://assets.ubuntu.com/v1/d96d86b5-vanilla_black-orange_hex.svg" alt="Vanilla framework logo">
          </a>
        </div>
        <a href="#navigation" class="p-navigation__toggle--open" title="menu">Menu</a>
        <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">Close menu</a>
      </div>
      <nav class="p-navigation__nav">
        <span class="u-off-screen">
          <a href="#main-content">Jump to main content</a>
        </span>
        <ul class="p-navigation__links">
          <li class="p-navigation__link is-selected"><a href="/">Docs</a></li>
          <li class="p-navigation__link"><a href="https://vanillaframework.io/accessibility">Accessibility</a></li>
          <li class="p-navigation__link"><a href="https://vanillaframework.io/browser-support">Browser support</a></li>
          <li class="p-navigation__link"><a href="https://vanillaframework.io/coding-standards">Coding standards</a></li>
          <li class="p-navigation__link"><a href="https://vanillaframework.io/contribute">Contribute</a></li>
        </ul>
      </nav>
    </header>
    <div class="docs-wrapper u-no-max-width">
      {% if navigation %}
      <div class="col-2 sidebar-col u-no-margin--left">
        <div class="p-navigation--sidebar">
          <header id="navigation" role="banner">
            <div class="p-navigation__banner">
              <div class="row">
                <div class="sidebar__cta u-align--right">
                  <ul class="p-inline-list u-no-margin--top u-float-right">
                    <li class="p-inline-list__item">
                      <i class="p-icon--menu js-sidebar-toggle" aria-hidden="false"></i>
                      <i class="p-icon--close js-sidebar-toggle u-hide" aria-hidden="true"></i>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </header>
          <div class="sidebar__content js-sidebar-toggle u-hide" aria-hidden="true">
            <select name="version-select" id="version-select">
              <option value="latest">v1.6.7</option>
            </select>
            <form class="p-search-box" style="margin-top: 1rem" onsubmit="return false">
              <input type="search" id="search-docs" class="p-search-box__input" name="search" placeholder="Search components" oninput="filterDocs()" title="Search the documentation" required />
              <button type="reset" class="p-search-box__reset" alt="reset" onclick="resetFilter()"><i class="p-icon--close"></i></button>
              <button type="submit" class="p-search-box__button" alt="search"><i class="p-icon--search"></i></button>
            </form>
            <ul id="docs-list-unsorted" class="p-list sidebar__first-level" data-js="sidebar-first-level">
              {% for item in navigation %}
              <li>
                {% if item.location %}
                <a class="sidebar__link" href="{{ item.location }}">{{ item.title }}</a>
                {% elif item.children %}
                <a class="sidebar__link {% for child in item.children %}{% if child.active %}is-selected{% endif %}{% endfor %}" href="#{{ item.title }}">{{ item.title }}<i class="p-icon--plus"></i><i class="p-icon--minus"></i></a>
                <ul class="sidebar__second-level">
                  {% for child in item.children %}
                  <li><a class="sidebar__link {% if child.active %}is-selected{% endif %}" href="{{ child.location }}">{{ child.title }}</a></li>
                  {% endfor %}
                </ul>
                {% endif %}
              </li>
              {% endfor %}
            </ul>
            <ul id="docs-list-sorted" class="p-list sidebar__first-level" data-js="sidebar-first-level" style="display: none;">
              {% for item in navigation %}
              {% for child in item.children %}
              <li class="js-list-items"><a class="sidebar__link" href="{{ child.location }}">{{ child.title }}</a></li>
              {% endfor %}
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
      {% endif %}
      <div class="col-8 main-col u-no-margin--top">
        <main id="main-content">
          <h1 class="u-off-screen">Vanilla framework documentation</h1>
          {{ content }}
        </main>
      </div>
      {% if toc_items %}
      <div class="col-2 toc-col">
        <aside id="side-content" class="p-aside" style="border: 0;">
          {% if toc_items %}
          <div class="p-aside__section">
            <h4 class="p-aside__header">Contents</h4>
            <nav class="p-aside__nav">
              <ul class="p-list">
                {{ toc_items }}
                <li class="p-toc__item--separate" id="back-to-top" style="display: none">
                  <a class="p-toc__link" href="#">Back to top</a>
                </li>
              </ul>
            </nav>
          </div>
          {% endif %}
        </aside>
      </div>
      {% endif %}
    </div>
    <footer class="p-footer u-no-margin--top" role="contentinfo">
      <div class="row u-no-max-width">
        <div class="col-12">
          <p>&copy; Canonical Ltd. Ubuntu and Canonical are registered trademarks of Canonical Ltd.</p>
        </div>
      </div>
    </footer>
    <script>

    // Sidebar menu overlay toggle
    var toggleElements = document.querySelectorAll('.js-sidebar-toggle');
    toggleElements.forEach(function(el) {
      if (el.tagName === 'I') {
        el.addEventListener(
          "click",
          function(e) {
            e.stopPropagation();
            toggleElements.forEach(function(el) {
              el.classList.toggle("u-hide");
              el.setAttribute('aria-hidden', el.getAttribute('aria-hidden') === 'true' ? 'false' : 'true');
            });
          },
          false
        );
      }
    });

    // Sidebar accordion sections
    var navSidebarLinks = document.querySelectorAll('.js-sidebar-toggle a');
    navSidebarLinks.forEach(function(el) {
      el.addEventListener(
        "click",
        function(e) {
          e.stopPropagation();
          var item = this;
          if (item.nextSibling) {
            item.classList.toggle("is-selected");
          }
        },
        false
      );
    });

    function insertAfter(newNode, referenceNode) {
      referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
    }

    // Append GitHub and Report a bug links
    function createLink(linkText, linkHref) {
      var link = document.createElement('a');
      link.className = 'header-link';
      link.appendChild(document.createTextNode(linkText));
      link.href = linkHref;
      return link;
    }

    var linksContainer = document.createElement('div');
    linksContainer.className = 'links-container';

    var ghLink = createLink('View on GitHub', 'https://github.com/vanilla-framework/vanilla-framework');
    var bugLink = createLink('Report a bug', 'https://github.com/vanilla-framework/vanilla-framework/issues/new')

    linksContainer.appendChild(ghLink);
    linksContainer.appendChild(bugLink);

    var contentHeader = document.getElementById('main-content').children[1];
    insertAfter(linksContainer, contentHeader);

    var line = document.createElement('hr');
    insertAfter(line, linksContainer);

    // Add classes to links
    var links = document.querySelectorAll('a');
    links.forEach(function(link) {
      var parentClass = link.parentNode.classList;
      var ignoreNav = !(parentClass.contains('p-navigation__logo') || parentClass.contains('p-navigation__link'));
      if (link.hostname && link.hostname != location.hostname && ignoreNav) {
        link.className += ' p-link--external';
      }
    });

    // Docs search functions
    function resetFilter() {
      document.getElementById('docs-list-sorted').style.display = 'none';
      document.getElementById('docs-list-unsorted').style.display = 'block';
    }

    function filterDocs() {
      var input = document.getElementById('search-docs');
      var filter = input.value.toLowerCase();

      if (filter) {
        document.getElementById('docs-list-unsorted').style.display = 'none';
        document.getElementById('docs-list-sorted').style.display = 'block';

        var docsListItems = document.querySelectorAll('.js-list-items');
        docsListItems.forEach(function(item) {
          var text = item.firstElementChild.innerText.toLowerCase();
          item.style.display = text.indexOf(filter) === 0 ? 'block' : 'none';
        });
      } else {
        resetFilter();
      }
    }
    </script>
    <script src="https://assets.ubuntu.com/v1/7db7c898-example-1.0.5.js"></script>
  </body>
</html>
