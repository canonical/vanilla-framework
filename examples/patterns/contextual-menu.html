---
layout: default
title: Contextual menu
category: _patterns
---

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Modi natus <span class="p-contextual-menu">
    <a href="#" class="p-contextual-menu__toggle" aria-controls="#menu" aria-expanded="false" aria-haspopup="true">Link</a>
    <span class="p-contextual-menu__dropdown" id="menu" aria-hidden="true" aria-label="submenu">
        <span class="p-contextual-menu__group">
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
        </span>
        <span class="p-contextual-menu__group">
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
        </span>
    </span>
</span> atque eligendi deleniti hic, dolores veritatis reiciendis officiis illo, facere facilis accusamus similique nulla nesciunt. Nemo reprehenderit officia assumenda error enim. Recusandae reiciendis ipsum, mollitia illo iusto excepturi alias dolore fugit eligendi nostrum, unde architecto consequuntur similique quo! Maxime iusto facere, commodi iste fuga officiis.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Modi natus atque eligendi deleniti hic, dolores veritatis reiciendis <span class="p-contextual-menu--left">
    <a href="#" class="p-contextual-menu__toggle" aria-controls="#menu-2" aria-expanded="false" aria-haspopup="true">Link</a>
    <span class="p-contextual-menu__dropdown" id="menu-2" aria-hidden="true" aria-label="submenu">
        <span class="p-contextual-menu__group">
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
        </span>
        <span class="p-contextual-menu__group">
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
            <a href="#" class="p-contextual-menu__link">Link</a>
        </span>
    </span>
</span> officiis illo, facere facilis accusamus similique nulla nesciunt. Nemo reprehenderit officia assumenda error enim. Recusandae reiciendis ipsum, mollitia illo iusto excepturi alias dolore fugit eligendi nostrum, unde architecto consequuntur similique quo! Maxime iusto facere, commodi iste fuga officiis.</p>
<p>Lorem ipsum dolor sit amet <span class="p-contextual-menu--center">
  <a href="#" class="p-contextual-menu__toggle" aria-controls="#menu-3" aria-expanded="false" aria-haspopup="true">Link</a>
  <span class="p-contextual-menu__dropdown" id="menu-3" aria-hidden="true" aria-label="submenu">
      <span class="p-contextual-menu__group">
          <a href="#" class="p-contextual-menu__link">Link</a>
          <a href="#" class="p-contextual-menu__link">Link</a>
          <a href="#" class="p-contextual-menu__link">Link</a>
      </span>
      <span class="p-contextual-menu__group">
          <a href="#" class="p-contextual-menu__link">Link</a>
          <a href="#" class="p-contextual-menu__link">Link</a>
          <a href="#" class="p-contextual-menu__link">Link</a>
      </span>
  </span>
</span>, consectetur adipisicing elit. Modi natus atque eligendi deleniti hic, dolores veritatis reiciendis officiis illo, facere facilis accusamus similique nulla nesciunt. Nemo reprehenderit officia assumenda error enim. Recusandae reiciendis ipsum, mollitia illo iusto excepturi alias dolore fugit eligendi nostrum, unde architecto consequuntur similique quo! Maxime iusto facere, commodi iste fuga officiis.</p>

<script>
(function() {
    /**
     * Toggle target elements with aria controls, hidden and expanded
     *
     * @param {String} toggleCtrl
     *
     * @example
     * <button class="p-contextual-menu__toggle" aria-controls="#menu" aria-expanded="false">Toggle</button>
     * <div id="menu" aria-hidden="true">
     *     <p>Example menu</p>
     * </div>
     *
     */
    function toggle(toggleCtrl) {

        // Select all toggle control elements
        var t = document.querySelectorAll(toggleCtrl);

        // Loop through all toggle control elements
        for(i = 0; i < t.length; i++) {

            // Set click event to each toggle control element
            t[i].addEventListener('click', function(event) {

                // Get toggle aria-control target
                var target = document.querySelector(
                    this.getAttribute('aria-controls'));

                // If target hidden is already true set to false and toggle
                // control expanded to be true / false
                if (target.getAttributeNode('aria-hidden').value == 'true') {
                    this.setAttribute('aria-expanded', true);
                    target.setAttribute('aria-hidden', false);
                } else {
                    this.setAttribute('aria-expanded', false);
                    target.setAttribute('aria-hidden', true);
                }
            });
        }
    }

    function clickOutsideListener(selector) {
        var toggles = document.querySelectorAll(selector);

        document.addEventListener('click', function(event) {
            toggles.forEach(function(toggle) {
                var dropdown = document.querySelector(toggle.getAttribute('aria-controls'));
                var clickOutside = !(toggle.contains(event.target) || dropdown.contains(event.target));

                if (clickOutside) {
                    toggle.setAttribute('aria-expanded', false);
                    dropdown.setAttribute('aria-hidden', true);
                }
            })
        });

    }

    toggle('.p-contextual-menu__toggle');
    clickOutsideListener('.p-contextual-menu__toggle');
})()
</script>
